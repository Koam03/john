<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Viewer</title>
    <style>
        /* Reset some default styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f4;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .asset-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .asset-item {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 10px;
            padding: 15px;
            width: 100%;
            max-width: 300px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }

        .asset-item img, .asset-item video, .asset-item audio {
            max-width: 100%;
            height: auto;
            border-bottom: 1px solid #ddd;
            margin-bottom: 10px;
        }

        .asset-name {
            font-size: 1.2em;
            color: #333;
            word-wrap: break-word;
        }

        @media (min-width: 600px) {
            .asset-item {
                width: 45%;
            }
        }

        @media (min-width: 900px) {
            .asset-item {
                width: 30%;
            }
        }
    </style>
</head>
<body>

    <h1>My Assets</h1>
    <div class="asset-container" id="assetContainer">
        <!-- Assets will be dynamically inserted here -->
    </div>

    <script>
        // Function to fetch the list of files from the server
        async function fetchFiles() {
            try {
                const response = await fetch('list_files.php');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const files = await response.json();
                displayFiles(files);
            } catch (error) {
                console.error('Error fetching files:', error);
                const container = document.getElementById('assetContainer');
                container.innerHTML = '<p>Error loading assets.</p>';
            }
        }

        // Function to display the files
        function displayFiles(files) {
            const container = document.getElementById('assetContainer');
            container.innerHTML = ''; // Clear any existing content

            files.forEach((file, index) => {
                const fileExtension = file.split('.').pop().toLowerCase();
                const assetDiv = document.createElement('div');
                assetDiv.className = 'asset-item';

                let mediaElement;

                // Determine the type of asset based on the file extension
                if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'].includes(fileExtension)) {
                    mediaElement = document.createElement('img');
                    mediaElement.src = file;
                    mediaElement.alt = `Asset ${index + 1}`;
                } else if (['mp4', 'webm', 'ogg'].includes(fileExtension)) {
                    mediaElement = document.createElement('video');
                    mediaElement.src = file;
                    mediaElement.controls = true;
                } else if (['mp3', 'wav', 'ogg'].includes(fileExtension)) {
                    mediaElement = document.createElement('audio');
                    mediaElement.src = file;
                    mediaElement.controls = true;
                } else {
                    // For other file types, you can add icons or links
                    mediaElement = document.createElement('a');
                    mediaElement.href = file;
                    mediaElement.textContent = 'Download File';
                    mediaElement.target = '_blank';
                }

                const nameDiv = document.createElement('div');
                nameDiv.className = 'asset-name';
                nameDiv.textContent = `${index + 1}. ${file}`;

                assetDiv.appendChild(mediaElement);
                assetDiv.appendChild(nameDiv);
                container.appendChild(assetDiv);
            });
        }

        // Fetch and display files when the page loads
        window.onload = fetchFiles;
    </script>

</body>
</html>
